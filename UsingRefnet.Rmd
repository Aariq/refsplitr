---
title: "UsingRefnet"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r, warning=FALSE, message=FALSE}
library(devtools)
library(tidyverse)
library(stringr)
#devtools::install_github("embruna/refnet2", subdir = "refnet")  
library(refnet)
library(ggmap)
library(stringi)
```

```{r ecuador1read}
eb_references <- read_references(data="./data/EBpubs.txt", 
                                 dir=FALSE, 
                                filename_root="./output/eb")

eb_authors <- read_authors(eb_references, 
                       filename_root="./output/eb")

eb_refined <- refine_authors(authors=eb_authors$authors,
                             master = eb_authors$master)


zz <- address_lat_long(data=eb_refined)

plot_addresses_points(data=zz)
plot_addresses_country(data=zz)

s <- net_plot_coauthor(data=zz)
s$data

q <- net_plot_coauthor_country(data=zz)
q$plot

p <- net_plot_coauthor_address(data=zz)
p$plot


ecology_references <- read_references("./data/Ecology.txt", 
                                 dir=FALSE, 
                                 filename_root="./output/ecology")

ecology_authors <- read_authors(ecology_references, 
                       filename_root="./output/ecology")

ecology_refined <- refine_authors(authors=ecology_authors$authors,
                             master = ecology_authors$master)

world <- map_data("world")

zz <- address_lat_long(data=ecology_refined)

plot_addresses_points(data=zz)
plot_addresses_country(data=zz)

s <- net_plot_coauthor(data=zz)
s$data

q <- net_plot_coauthor_country(data=zz)
q$plot

p <- net_plot_coauthor_address(data=zz)
p$plot

```